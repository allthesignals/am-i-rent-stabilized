!function(){"use strict";var e=["html","json","jsonp","script"],t=["connect","delete","get","head","options","patch","post","put","trace"],n=function o(){var e={},t={},n={url:function(e){return s.call(this,"url",e,r.string)},sync:function(e){return s.call(this,"sync",e,r.bool)},cache:function(e){return s.call(this,"cache",e,r.bool)},type:function(e){return s.call(this,"type",e,r.type)},header:function(t,n){return e.headers=e.headers||{},r.string(t),"undefined"!=typeof n?(r.string(n),e.headers[t]=n,this):e.headers[t]},auth:function(t,n){return r.string(t),r.string(n),e.auth={user:t,passwd:n},this},method:function(e){return s.call(this,"method",e,r.method)},queryString:function(e){return s.call(this,"queryString",e,r.queryString)},data:function(e){return s.call(this,"data",e,r.plainObject)},body:function(e){return s.call(this,"body",e,null,function(e){if("object"==typeof e){if(!(e instanceof FormData)){try{e=JSON.stringify(e)}catch(t){throw new TypeError("Unable to stringify body's content : "+t.name)}this.header("Content-Type","application/json")}}else e+="";return e})},into:function(e){return s.call(this,"into",e,r.selector,function(e){return"string"==typeof e?document.querySelectorAll(e):e instanceof HTMLElement?[e]:void 0})},jsonPaddingName:function(e){return s.call(this,"jsonPaddingName",e,r.string)},jsonPadding:function(e){return s.call(this,"jsonPadding",e,r.func)},on:function(e,n){return"function"==typeof n&&(t[e]=t[e]||[],t[e].push(n)),this},off:function(e){return t[e]=[],this},trigger:function(e,n){var r=this,a=function(e,n){t[e]instanceof Array&&t[e].forEach(function(e){e.call(r,n)})};if("undefined"!=typeof e){e+="";var o=/^([0-9])([0-9x])([0-9x])$/i,i=e.match(o);i&&i.length>3?Object.keys(t).forEach(function(e){var t=e.match(o);!(t&&t.length>3&&i[1]===t[1])||"x"!==t[2]&&i[2]!==t[2]||"x"!==t[3]&&i[3]!==t[3]||a(e,n)}):t[e]&&a(e,n)}return this},go:function(){var t=e.type||(e.into?"html":"json"),n=c();return"function"==typeof i[t]?i[t].call(this,n):void 0}},i={json:function(e){var t=this;i._xhr.call(this,e,function(e){if(e)try{e=JSON.parse(e)}catch(n){return t.trigger("error",n),null}return e})},html:function(t){i._xhr.call(this,t,function(t){return e.into&&e.into.length&&[].forEach.call(e.into,function(e){e.innerHTML=t}),t})},_xhr:function(t,n){var r,a,o,i,s=this,c=e.method||"get",d=e.sync!==!0,u=new XMLHttpRequest,p=e.data,f=e.body,h=(e.headers||{},this.header("Content-Type"));if(!h&&p&&l()&&(this.header("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h=this.header("Content-Type")),p&&l())if("string"!=typeof f&&(f=""),h.indexOf("json")>-1)try{f=JSON.stringify(p)}catch(g){throw new TypeError("Unable to stringify body's content : "+g.name)}else{o=h&&h.indexOf("x-www-form-urlencoded")>1;for(r in p)f+=o?encodeURIComponent(r)+"="+encodeURIComponent(p[r])+"&":r+"="+p[r]+"\n\r"}i=[c,t,d],e.auth&&(i.push(e.auth.user),i.push(e.auth.passwd)),u.open.apply(u,i);for(a in e.headers)u.setRequestHeader(a,e.headers[a]);u.onprogress=function(e){e.lengthComputable&&s.trigger("progress",e.loaded/e.total)},u.onload=function(){var e=u.responseText;this.status>=200&&this.status<300&&("function"==typeof n&&(e=n(e)),s.trigger("success",e)),s.trigger(this.status,e),s.trigger("end",e)},u.onerror=function(e){s.trigger("error",e,arguments)},u.send(f)},jsonp:function(t){var n,r=this,i=document.querySelector("head"),s=e.sync!==!0,l=e.jsonPaddingName||"callback",c=e.jsonPadding||"_padd"+(new Date).getTime()+Math.floor(1e4*Math.random()),d={};if(o[c])throw new Error("Padding "+c+"  already exists. It must be unique.");/^ajajsonp_/.test(c)||(c="ajajsonp_"+c),window[c]=function(e){r.trigger("success",e),i.removeChild(n),window[c]=void 0},d[l]=c,t=a(t,d),n=document.createElement("script"),n.async=s,n.src=t,n.onerror=function(){r.trigger("error",arguments),i.removeChild(n),window[c]=void 0},i.appendChild(n)},script:function(t){var n,r=this,a=document.querySelector("head")||document.querySelector("body"),o=e.sync!==!0;if(!a)throw new Error("Ok, wait a second, you want to load a script, but you don't have at least a head or body tag...");n=document.createElement("script"),n.async=o,n.src=t,n.onerror=function(){r.trigger("error",arguments),a.removeChild(n)},n.onload=function(){r.trigger("success",arguments)},a.appendChild(n)}},s=function(t,n,a,o){if("undefined"!=typeof n){if("function"==typeof a)try{n=a.call(r,n)}catch(i){throw new TypeError("Failed to set "+t+" : "+i.message)}return e[t]="function"==typeof o?o.call(this,n):n,this}return"undefined"===e[t]?null:e[t]},l=function(){return["delete","patch","post","put"].indexOf(e.method)>-1},c=function(){var t=e.url,n="undefined"!=typeof e.cache?!!e.cache:!0,r=e.queryString||"",o=e.data;return n===!1&&(r+="&ajabuster="+(new Date).getTime()),t=a(t,r),o&&!l()&&(t=a(t,o)),t};return n},r={bool:function(e){return!!e},string:function(e){if("string"!=typeof e)throw new TypeError("a string is expected, but "+e+" ["+typeof e+"] given");return e},plainObject:function(e){if("object"!=typeof e||e.constructor!==Object)throw new TypeError("an object is expected, but "+e+"  ["+typeof e+"] given");return e},type:function(t){if(t=this.string(t),e.indexOf(t.toLowerCase())<0)throw new TypeError("a type in ["+e.join(", ")+"] is expected, but "+t+" given");return t.toLowerCase()},method:function(e){if(e=this.string(e),t.indexOf(e.toLowerCase())<0)throw new TypeError("a method in ["+t.join(", ")+"] is expected, but "+e+" given");return e.toLowerCase()},queryString:function(e){var t={};return"string"==typeof e?e.replace("?","").split("&").forEach(function(e){var n=e.split("=");2===n.length&&(t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]))}):t=e,this.plainObject(t)},selector:function(e){if("string"!=typeof e&&!(e instanceof HTMLElement))throw new TypeError("a selector or an HTMLElement is expected, "+e+" ["+typeof e+"] given");return e},func:function(e){if(e=this.string(e),!/^([a-zA-Z_])([a-zA-Z0-9_\-])+$/.test(e))throw new TypeError("a valid function name is expected, "+e+" ["+typeof e+"] given");return e}},a=function(e,t){var n;if(e=e||"",t)if(-1===e.indexOf("?")&&(e+="?"),"string"==typeof t)e+=t;else if("object"==typeof t)for(n in t)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof exports?module.exports=n:window.aja=window.aja||n}(),function(w,d){var atc_url="//addtocalendar.com/atc/",atc_version="1.5",b=d.documentElement;Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]==e)return t;return-1}),Array.prototype.map||(Array.prototype.map=function(e){for(var t=[],n=0,r=this.length;r>n;n++)t.push(e(this[n]));return t});var isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunc=function(e){return"[object Function]"===Object.prototype.toString.call(e)},ready=function(e,t){function n(){if(!s){if(!t.body)return setTimeout(n,13);if(s=!0,c){for(var e,r=0;e=c[r++];)e.call(null);c=null}}}function r(){if(!l){if(l=!0,"complete"===t.readyState)return n();if(t.addEventListener)t.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",n,!1);else if(t.attachEvent){t.attachEvent("onreadystatechange",o),e.attachEvent("onload",n);var r=!1;try{r=null==e.frameElement}catch(s){}b.doScroll&&r&&a()}else i=e.onload,e.onload=function(e){i(e),n()}}}function a(){if(!s){try{b.doScroll("left")}catch(e){return void setTimeout(a,1)}n()}}var o,i,s=!1,l=!1,c=[];return t.addEventListener?o=function(){t.removeEventListener("DOMContentLoaded",o,!1),n()}:t.attachEvent&&(o=function(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",o),n())}),function(e){r(),s?e.call(null):c.push(e)}}(w,d);w.addtocalendar&&"function"==typeof w.addtocalendar.start||(w.addtocalendar||(w.addtocalendar={}),addtocalendar.languages={de:"In den Kalender",en:"Add to Calendar",es:"Añadir al Calendario",fr:"Ajouter au calendrier",hi:"कैलेंडर में जोड़ें","in":"Tambahkan ke Kalender",ja:"カレンダーに追加",ko:"캘린더에 추가",pt:"Adicionar ao calendário",ru:"Добавить в календарь",uk:"Додати в календар",zh:"添加到日历"},addtocalendar.calendar_urls={},addtocalendar.loadSettings=function(element){var settings={language:"auto","show-list-on":"click",calendars:["iCalendar","Google Calendar","Outlook","Outlook Online","Yahoo! Calendar"],secure:"auto","on-button-click":function(){},"on-calendar-click":function(){}};for(var option in settings){var pname="data-"+option,eattr=element.getAttribute(pname);if(null!=eattr){if(isArray(settings[option])){settings[option]=eattr.replace(/\s*,\s*/g,",").replace(/^\s+|\s+$/g,"").split(",");continue}if(isFunc(settings[option])){var fn=window[eattr];settings[option]=isFunc(fn)?fn:eval("(function(mouseEvent){"+eattr+"})");continue}settings[option]=element.getAttribute(pname)}}return settings},addtocalendar.load=function(){ready(function(){for(var e={iCalendar:"ical","Google Calendar":"google",Outlook:"outlook","Outlook Online":"outlookonline","Yahoo! Calendar":"yahoo"},t=-(new Date).getTimezoneOffset().toString(),n=addtocalendar.languages,r=document.getElementsByTagName("*"),a=0;a<r.length;a++){var o=r[a].className;if(-1!=o.split(" ").indexOf("addtocalendar")){var i=addtocalendar.loadSettings(r[a]),s=1==i.calendars.length,l="http:";"auto"==i.secure?l="https:"==location.protocol?"https:":"http:":"true"==i.secure&&(l="https:");var c=l+atc_url,d=r[a].id,u=n.en;if("auto"==i.language){var p="no_lang";"string"==typeof navigator.language?p=navigator.language.substr(0,2):"string"==typeof navigator.browserLanguage&&(p=navigator.browserLanguage.substr(0,2)),n.hasOwnProperty(p)&&(u=n[p])}else n.hasOwnProperty(i.language)&&(u=n[i.language]);for(var f=["utz="+t,"uln="+navigator.language,"vjs="+atc_version],h=r[a].getElementsByTagName("var"),g=-1,v=0;v<h.length;v++){var m=h[v].className.replace("atc_",""),y=h[v].innerHTML;"event"!=m?m!=h[v].className?-1!=g&&f.push("e["+g+"]["+m+"]="+encodeURIComponent(y)):"atc-body"==m&&(u=y):g++}var b=""==d?"":d+"_link",E=document.createElement("ul");E.className="atcb-list";var S="",w="";for(var C in i.calendars)if(e.hasOwnProperty(i.calendars[C])){var L=e[i.calendars[C]],x=""==d?"":'id="'+d+"_"+L+'_link"',N=c+L+"?"+f.join("&");s?w=N:S+='<li class="atcb-item"><a '+x+' class="atcb-item-link" href="'+N+'" target="_blank">'+i.calendars[C]+"</a></li>"}if(E.innerHTML=S,void 0==r[a].getElementsByClassName("atcb-link")[0]){var T=document.createElement("a");T.className="atcb-link",T.innerHTML=u,T.id=b,T.tabIndex="-1",s&&(T.href=w,T.target="_blank"),r[a].appendChild(T),s||r[a].appendChild(E)}else{var T=r[a].getElementsByClassName("atcb-link")[0];s||T.parentNode.appendChild(E),T.tabIndex="-1",""==T.id&&(T.id=b),s&&(T.href=w,T.target="_blank")}r[a].getElementsByClassName("atcb-link")[0].addEventListener("click",i["on-button-click"],!1);for(var k=r[a].getElementsByClassName("atcb-item-link"),v=0;v<k.length;v++)k[v].addEventListener("click",i["on-calendar-click"],!1)}}})},addtocalendar.load())}(window,document),window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function a(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function i(e,t){for(var r in e){var a=e[r];if(!o(a,"-")&&m[a]!==n)return"pfx"==t?a:!0}return!1}function s(e,t,r){for(var o in e){var i=t[e[o]];if(i!==n)return r===!1?e[o]:a(i,"function")?i.bind(r||t):i}return!1}function l(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+E.join(r+" ")+r).split(" ");return a(t,"string")||a(t,"undefined")?i(o,t):(o=(e+" "+S.join(r+" ")+r).split(" "),s(o,t,n))}var c,d,u,p="2.8.3",f={},h=t.documentElement,g="modernizr",v=t.createElement(g),m=v.style,y=":)",b=({}.toString,"Webkit Moz O ms"),E=b.split(" "),S=b.toLowerCase().split(" "),w={},C=[],L=C.slice,x=function(e,n,r,a){var o,i,s,l,c=t.createElement("div"),d=t.body,u=d||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=a?a[r]:g+(r+1),c.appendChild(s);return o=["&#173;",'<style id="s',g,'">',e,"</style>"].join(""),c.id=g,(d?c:u).innerHTML+=o,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=h.style.overflow,h.style.overflow="hidden",h.appendChild(u)),i=n(c,e),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),h.style.overflow=l),!!i},N=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var r;return x("@media "+t+" { #"+g+" { position: absolute; } }",function(t){r="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),r},T={}.hasOwnProperty;u=a(T,"undefined")||a(T.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return T.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=L.call(arguments,1),r=function(){if(this instanceof r){var a=function(){};a.prototype=t.prototype;var o=new a,i=t.apply(o,n.concat(L.call(arguments)));return Object(i)===i?i:o}return t.apply(e,n.concat(L.call(arguments)))};return r}),w.borderradius=function(){return l("borderRadius")},w.csstransitions=function(){return l("transition")},w.generatedcontent=function(){var e;return x(["#",g,"{font:0/0 a}#",g,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e};for(var k in w)u(w,k)&&(d=k.toLowerCase(),f[d]=w[k](),C.push((f[d]?"":"no-")+d));return f.addTest=function(e,t){if("object"==typeof e)for(var r in e)u(e,r)&&f.addTest(r,e[r]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(h.className+=" "+(t?"":"no-")+e),f[e]=t}return f},r(""),v=c=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function a(e){var t=m[e[g]];return t||(t={},v++,e[g]=v,m[v]=t),t}function o(e,n,r){if(n||(n=t),d)return n.createElement(e);r||(r=a(n));var o;return o=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!o.canHaveChildren||f.test(e)||o.tagUrn?o:r.frag.appendChild(o)}function i(e,n){if(e||(e=t),d)return e.createDocumentFragment();n=n||a(e);for(var o=n.frag.cloneNode(),i=0,s=r(),l=s.length;l>i;i++)o.createElement(s[i]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function l(e){e||(e=t);var r=a(e);return y.shivCSS&&!c&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||s(e,r),e}var c,d,u="3.7.0",p=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",v=0,m={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){c=!0,d=!0}}();var y={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:p.shivCSS!==!1,supportsUnknownElements:d,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:i};e.html5=y,l(t)}(this,t),f._version=p,f._domPrefixes=S,f._cssomPrefixes=E,f.mq=N,f.testProp=function(e){return i([e])},f.testAllProps=l,f.testStyles=x,f}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==v.call(e)}function a(e){return"string"==typeof e}function o(){}function i(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=m.shift();y=1,e?e.t?h(function(){("c"==e.t?p.injectCss:p.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):y=0}function l(e,n,r,a,o,l,c){function d(t){if(!f&&i(u.readyState)&&(b.r=f=1,!y&&s(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&h(function(){S.removeChild(u)},50);for(var r in N[n])N[n].hasOwnProperty(r)&&N[n][r].onload()}}var c=c||p.errorTimeout,u=t.createElement(e),f=0,v=0,b={t:r,s:n,e:o,a:l,x:c};1===N[n]&&(v=1,N[n]=[]),"object"==e?u.data=n:(u.src=n,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,v)},m.splice(a,0,b),"img"!=e&&(v||2===N[n]?(S.insertBefore(u,E?null:g),h(d,c)):N[n].push(u))}function c(e,t,n,r,o){return y=0,t=t||"j",a(e)?l("c"==t?C:w,e,t,this.i++,n,r,o):(m.splice(this.i++,0,e),1==m.length&&s()),this}function d(){var e=p;return e.loader={load:c,i:0},e}var u,p,f=t.documentElement,h=e.setTimeout,g=t.getElementsByTagName("script")[0],v={}.toString,m=[],y=0,b="MozAppearance"in f.style,E=b&&!!t.createRange().compareNode,S=E?f:g.parentNode,f=e.opera&&"[object Opera]"==v.call(e.opera),f=!!t.attachEvent&&!f,w=b?"object":f?"script":"img",C=f?"script":w,L=Array.isArray||function(e){return"[object Array]"==v.call(e)},x=[],N={},T={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};p=function(e){function t(e){var t,n,r,e=e.split("!"),a=x.length,o=e.pop(),i=e.length,o={url:o,origUrl:o,prefixes:e};for(n=0;i>n;n++)r=e[n].split("="),(t=T[r.shift()])&&(o=t(o,r));for(n=0;a>n;n++)o=x[n](o);return o}function i(e,a,o,i,s){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(a&&(a=r(a)?a:a[e]||a[i]||a[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,a,o,i,s):(N[l.url]?l.noexec=!0:N[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(a)||r(c))&&o.load(function(){d(),a&&a(l.origUrl,s,i),c&&c(l.origUrl,s,i),N[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(a(e))n||(u=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}),i(e,u,t,0,c);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(r(u)?u=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(p[l])),i(e[l],u,t,l,c))}else!n&&f()}var s,l,c=!!e.test,d=e.load||e.both,u=e.callback||o,p=u,f=e.complete||o;n(c?e.yep:e.nope,!!d),d&&n(d)}var l,c,u=this.yepnope.loader;if(a(e))i(e,0,u,0);else if(L(e))for(l=0;l<e.length;l++)c=e[l],a(c)?i(c,0,u,0):L(c)?p(c):Object(c)===c&&s(c,u);else Object(e)===e&&s(e,u)},p.addPrefix=function(e,t){T[e]=t},p.addFilter=function(e){x.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=d(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,a,l,c){var d,u,f=t.createElement("script"),a=a||p.errorTimeout;f.src=e;for(u in r)f.setAttribute(u,r[u]);n=c?s:n||o,f.onreadystatechange=f.onload=function(){!d&&i(f.readyState)&&(d=1,n(),f.onload=f.onreadystatechange=null)},h(function(){d||(d=1,n(1))},a),l?f.onload():g.parentNode.insertBefore(f,g)},e.yepnope.injectCss=function(e,n,r,a,i,l){var c,a=t.createElement("link"),n=l?s:n||o;a.href=e,a.rel="stylesheet",a.type="text/css";for(c in r)a.setAttribute(c,r[c]);i||(g.parentNode.insertBefore(a,g),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e,t){function n(t,n,i,s){t[r](o+n,"wheel"==a?i:function(t){!t&&(t=e.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==a?(n.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-1/40*t.wheelDeltaX)):n.deltaY=t.detail,i(n)},s||!1)}var r,a,o="";e.addEventListener?r="addEventListener":(r="attachEvent",o="on"),a="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,r){n(e,a,t,r),"DOMMouseScroll"==a&&n(e,"MozMousePixelScroll",t,r)}}(window,document);var app=app||{};app.events=function(e,t,n){var r=function(e,t){n(document).trigger(e,[t])},a=function(e,t){n(document).on(e,function(e,n){t(n)})};return{publish:r,subscribe:a}}(window,document,jQuery);var app=app||{};app.s=function(){var e={formFilled:!1,currentSlide:null,isAnimating:!1,pageHeight:null,yesNoState:!1};return app.events.subscribe("state-change",function(t){console.log("state change detected! ",t),void 0!==t.isAnimating&&(e.isAnimating=t.isAnimating),void 0!==t.formFilled&&(e.formFilled=t.formFilled),void 0!==t.currentSlide&&(e.currentSlide=t.currentSlide),void 0!==t.pageHeight&&(e.pageHeight=t.pageHeight),void 0!==t.yesNoState&&(e.yesNoState=t.yesNoState),console.log("state: ",e),app.events.publish("state-updated",e)}),{state:e}}(window,document);var app=app||{};app.el=function(e,t,n){function r(e){this.dd=e,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.drop-down > li"),this.val=void 0,this.index=-1,this.initEvents()}var a={navGoNext:t.querySelectorAll(".go-next"),navGoFirst:t.querySelectorAll(".go-first"),navGoFour:t.querySelectorAll(".go-step4"),burgerIcon:t.querySelector(".burger"),navBar:t.querySelector(".main-nav"),mainNavList:t.querySelector(".main-nav ul"),progressCircles:t.querySelectorAll(".margin-circles li"),slidesContainer:t.querySelector(".slides-container"),slides:t.querySelectorAll(".slide"),slide4:t.querySelector("#slide-8"),dd:null,addressInput:t.querySelector(".address-input"),boroSelect:t.querySelector(".user-data.borough-select"),boroDropDown:t.getElementById("boroughs"),boroDropDownItems:t.querySelectorAll("#boroughs li a"),selectBoro:t.getElementsByName("borough"),search:t.querySelector(".search"),valErrors:t.querySelectorAll(".validation-error"),valErrorAddress:t.getElementById("error-address"),valErrorBoro:t.getElementById("error-boro"),valErrorNF:t.getElementById("error-not-found"),yes:t.querySelectorAll(".yes"),no:t.querySelectorAll(".no"),yesNoState:!1,map:t.getElementById("map"),mapMessage:t.querySelector(".map-message"),mailTo:t.getElementById("mail-to"),lightBox:t.getElementById("rent-history"),addToCalendar:t.getElementById("atc_text_link"),addToCalendarLink:t.querySelector("#atc_text_link_link.atcb-link"),fbShare:t.querySelector(".fb-share-button"),learnMore:t.querySelector(".button.learn-more")};return r.prototype={initEvents:function(){var e=this;e.dd.on("click",function(e){return e.preventDefault(),app.f.toggleClass(this,"active"),!1}),e.opts.on("click",function(t){t.preventDefault();var r=n(this);e.val=r.text(),e.index=r.index(),e.placeholder.text("Borough: "+e.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}},a.dd=new r(n(".user-data.borough-select")),{el:a}}(window,document,jQuery);var app=app||{};app.f=function(e,t){var n=app.el.el,r=app.s;app.events.subscribe("state-updated",function(e){r=e});var a={UP:38,DOWN:40};return{addEventListenerList:function(e,t,n){var r=0,a=e.length;for(r;a>r;r++)e[r].addEventListener(t,n,!1)},onKeyDown:function(e){var t=e.keyCode;t===a.UP?(app.f.goToPrevSlide(),e.preventDefault()):t===a.DOWN&&(app.f.goToNextSlide(),e.preventDefault())},onMouseWheel:function(e){var t=e/30||-e;-1>t?app.f.goToNextSlide():t>1&&app.f.goToPrevSlide()},getSlideIndex:function(e){for(var t,r=0;r<n.slides.length;r++)n.slides[r]===e&&(t=r);return t},goToSlide:function(e){if(!r.isAnimating&&e){app.events.publish("state-change",{isAnimating:!0,currentSlide:e});var t=app.f.getSlideIndex(e);console.log("index: ",t," slide: ",e),TweenLite.to(n.slidesContainer,1,{scrollTo:{y:r.pageHeight*t},onComplete:app.f.onSlideChangeEnd})}},goToPrevSlide:function(e){var t=app.f.getSlideIndex(r.currentSlide)-1;console.log("go previous slide",t),t>=0&&(app.f.goToSlide(n.slides[t]),e&&"function"==typeof e&&e())},goToNextSlide:function(e){var t=app.f.getSlideIndex(r.currentSlide),a=n.slides[t+1];console.log("formFilled: ",r.formFilled," index: ",t),a&&(0===t||t>=1&&r.formFilled===!0)&&(app.f.goToSlide(a),e&&"function"==typeof e&&e())},goToFirstSlide:function(){r.currentSlide&&(n.addressInput.value="",app.f.resetSearchResultMsg(),app.f.hideFormValidationErrors(),app.f.resetBoroValue(),app.map.resetMap(),app.f.addClass(n.yes,"hidden"),app.f.removeClass(n.no,"hidden"),app.f.goToSlide(n.slides[0]),app.events.publish("state-change",{formFilled:!1}))},onSlideChangeEnd:function(){app.events.publish("state-change",{isAnimating:!1}),app.f.updateProgCircles(r.currentSlide)},updateProgCircles:function(t){var r,a=app.f.getSlideIndex(t),o=0,i=n.progressCircles.length;for(r=e.innerHeight<=700||e.innerWidth<=1100?"20px":"25px",o;i>o;o++){var s=n.progressCircles[o];a===o?(s.style.backgroundImage="url(assets/png/oval_25_filled.png)",s.style.backgroundSize=r,s.style.backgroundRepeat="no-repeat"):(s.style.background="url(assets/png/oval_25_blank.png)",s.style.backgroundSize=r,s.style.backgroundRepeat="no-repeat")}},onResize:function(){var t=e.innerHeight-60,a=r.currentSlide,o=app.f.getSlideIndex(a);r.pageHeight!==t&&(app.events.publish("state-change",{pageHeight:t}),TweenLite.set([n.slidesContainer,n.slides],{height:r.pageHeight+"px"}),TweenLite.set(n.slidesContainer,{scrollTo:{y:r.pageHeight*o}}))},iterateNodeList:function(e,t){if(e&&e.length){var n=0,r=e.length;for(n;r>n;n++)return t(e[n],n)}return e&&!e.length?t(e):void 0},indexOf:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},hasClass:function(e,t){return app.f.iterateNodeList(e,function(e){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)})},addClass:function(e,t){app.f.iterateNodeList(e,function(e){e.classList?e.classList.add(t):e.className+=" "+t})},toggleClass:function(e,t){app.f.iterateNodeList(e,function(e){if(e.classList)e.classList.toggle(t);else{var n=e.className.split(" "),r=n.indexOf(t);r>=0?n.splice(r,1):(n.push(t),e.className=n.join(" "))}})},removeClass:function(e,t){app.f.iterateNodeList(e,function(e){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")})},resetSearchResultMsg:function(){n.yesNoState===!0&&(app.f.toggleClass(n.yes,"hidden"),app.f.toggleClass(n.no,"hidden"),n.yesNoState=!1)},hideFormValidationErrors:function(){var e=0,t=n.valErrors.length;for(e;t>e;e++)app.f.hasClass(n.valErrors[e],"vis-hidden")===!1&&app.f.addClass(n.valErrors[e],"vis-hidden")},resetBoroValue:function(){n.dd.val=void 0,n.dd.placeholder.text("Select a Borough")},addToCalendar:function(){var r,a,o=new Date;r=new Date(o),r.setDate(r.getDate()+7),a=new Date(o),a.setDate(r.getDate()+1),n.addToCalendar.innerHTML='<var class="atc_event"><var class="atc_date_start">'+r+'</var><var class="atc_date_end">'+a+'</var><var class="atc_timezone">America/New_York</var><var class="atc_title">Check mail for my rent history</var><var class="atc_description">See if your rent history arrived in the mail, then go back to http://amirentstabilzed.com!</var><var class="atc_location">my house</var></var>',e.addtocalendar.load();var i=t.querySelector("#atc_text_link_link.atcb-link");i.innerHTML="Create a calendar reminder.",i.tabindex="-1"}}}(window,document);var app=app||{};app.l=function(e){{var t=app.el.el,n=app.f,r=app.s;app.a}app.events.subscribe("state-updated",function(e){r=e}),e.onresize=n.onResize,addWheelListener(e,function(e){n.onMouseWheel(e.deltaY),e.preventDefault()}),e.onkeydown=n.onKeyDown,n.addEventListenerList(t.navGoNext,"click",n.goToNextSlide),n.addEventListenerList(t.navGoFour,"click",function(e){e.preventDefault(),app.events.publish("state-change",{formFilled:!0}),n.hideFormValidationErrors(),n.goToSlide(t.slides[6])}),t.burgerIcon.addEventListener("click",function(e){e.preventDefault(),n.toggleClass(t.burgerIcon,"open"),n.toggleClass(t.mainNavList,"responsive")}),t.slidesContainer.addEventListener("click",function(){n.hasClass(t.boroSelect,"active")&&n.removeClass(t.boroSelect,"active")}),t.search.addEventListener("click",function(e){e.preventDefault();var n=t.addressInput.value,r=t.dd.val;_gaq.push(["_trackEvent","Address Entered","Search",n+", "+r]),app.a.checkAddressInput(n,r)}),n.addEventListenerList(t.navGoFirst,"click",n.goToFirstSlide),t.addressInput.addEventListener("blur",function(){""!==t.addressInput.value&&n.hasClass(t.valErrorAddress,"vis-hidden")!==!0&&n.addClass(t.valErrorAddress,"vis-hidden")}),n.addEventListenerList(t.boroDropDownItems,"click",function(){n.hasClass(t.valErrorBoro,"vis-hidden")!==!0&&void 0!==t.dd.getValue&&n.addClass(t.valErrorBoro,"vis-hidden")}),t.lightBox.addEventListener("click",function(r){r.preventDefault(),n.goToSlide(t.slides[6]),e.location.hash=""})}(window,document);var app=app||{};app.a=function(){{var e=app.el.el,t=app.f;app.s}return{checkAddressInput:function(n,r){if(""!==n&&void 0!==r){app.events.publish("state-change",{formFilled:!0}),t.goToNextSlide();var a=app.a.parseAddressInput(n);setTimeout(function(){app.map.geoclient(a[0],a[1],r)},1e3)}else""===n&&void 0===r?t.hasClass(e.valErrorAddress,"vis-hidden")===!0&&t.hasClass(e.valErrorBoro,"vis-hidden")===!0&&(t.toggleClass(e.valErrorAddress,"vis-hidden"),t.toggleClass(e.valErrorBoro,"vis-hidden")):void 0===r?t.hasClass(e.valErrorBoro,"vis-hidden")===!0&&t.toggleClass(e.valErrorBoro,"vis-hidden"):""===n?t.hasClass(e.valErrorAddress,"vis-hidden")===!0&&t.toggleClass(e.valErrorAddress,"vis-hidden"):t.goToPrevSlide()},parseAddressInput:function(e){var t=e.split(" "),n=t.length,r=t[0],a=t.splice(1,n),o=a.join(" ");return[r,o]},createMailTo:function(){var t="rentinfo@nyshcr.org",n="request for rent history",r="Hello, \n\nI, YOUR NAME HERE, am currently renting YOUR ADDRESS, APARTMENT NUMBER, BOROUGH, ZIPCODE and would like to request the rent history for this apartment. Any information you can provide me would be greatly appreciated. \n\nthank you,\n\n- YOUR NAME HERE",a="mailto:"+encodeURIComponent(t)+"?subject="+encodeURIComponent(n)+"&body="+encodeURIComponent(r);e.mailTo.setAttribute("href",a)}}}(window,document);var app=app||{};app.map=function(e,t,n){function r(e,t,r){n().url(e).type(t).on("success",function(e){r(e)}).on("error",function(){r("error")}).go()}function a(e,t){var n="SELECT * FROM nyc_tenants_rights_service_areas WHERE ST_Contains(nyc_tenants_rights_service_areas.the_geom,ST_GeomFromText('Point("+t+" "+e+")', 4326));";return n}function o(e){if(e.rows.length>0&&u.yesNoState===!1){var t=JSON.stringify(e.rows[0].bbl);_gaq.push(["_trackEvent","CDB","Match",t]),app.f.toggleClass(c.yes,"hidden"),app.f.toggleClass(c.no,"hidden"),app.events.publish("state-change",{yesNoState:!0})}d.goToNextSlide()}function i(t){var n=e.querySelector(".no-local-tr"),r=e.querySelector(".yes-local-tr"),a=e.createElement("ul");if(a.className="org-list",t.rows.length>0){n.style.display="none",r.style.display="block";var o=0,i=t.rows.length;for(o;i>o;o++){var s=t.rows[o];f.tr_groups.push(s)}}}function s(){c=app.el.el,d=app.f,u=app.s,y()}var l,c={},d={},u=app.s,p="https://chenrick.cartodb.com/api/v2/sql?q=",f={};app.events.subscribe("state-updated",function(e){u=e});var h=function(e,t,n){var a="9cd0a15f",o="app_id="+a+"&",i="54dc84bcaca9ff4877da771750033275",s="app_key="+i,l="houseNumber="+e+"&",c=t.replace(" ","+"),d="street="+c+"&",u="borough="+n+"&",p="https://api.cityofnewyork.us/geoclient/v1/address.json?",f=p+l+d+u+o+s;r(f,"jsonp",g)
},g=function(e){if("object"==typeof e&&void 0!==e.address.bbl){var t=e.address;f={bbl:t.bbl,lon:t.longitudeInternalLabel,lat:t.latitudeInternalLabel,hNo:t.houseNumber,sName:t.streetName1In,bCode:t.boroughCode1In,bUSPS:t.uspsPreferredCityName,zip:t.zipCode,cd:t.communityDistrict,bin:t.giBuildingIdentificationNumber1};var n=t.bbl,r=JSON.stringify(f);_gaq.push(["_trackEvent","Geoclient Success","Result",r]),v(n),m(e)}else c.addressInput.value="",d.resetBoroValue(),d.hasClass(c.valErrorNF,"vis-hidden")===!0&&d.toggleClass(c.valErrorNF,"vis-hidden"),d.hasClass(c.valErrorBoro,"vis-hidden")===!1&&d.addClass(c.valErrorBoro,"vis-hidden"),d.hasClass(c.valErrorAddress,"vis-hidden")===!1&&d.addClass(c.valErrorAddress,"vis-hidden"),app.events.publish("state-change",{formFilled:!1}),app.f.goToPrevSlide()},v=function(e){var t="SELECT bbl FROM all_nyc_likely_rent_stabl_merged WHERE bbl = "+e,n=a(f.lat,f.lon);r(p+t,"json",o),r(p+n,"json",i)},m=function(e){var t=e.address.longitudeInternalLabel,n=e.address.latitudeInternalLabel,r=[n,t],a=e.address.houseNumber+" "+e.address.firstStreetNameNormalized+"<br>"+e.address.uspsPreferredCityName+", NY "+e.address.zipCode;l&&c.map.removeLayer(l),l=new L.marker(r).addTo(c.map),l.on("popupopen",function(){c.map.setView(r,17)}),l.bindPopup("<b>"+a+"</b>").openPopup()},y=function(){c.map=new L.Map("map",{center:[40.7127,-74.0059],zoom:12});var e,t=L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'}),n="https://chenrick.cartodb.com/api/v2/viz/3680af8e-7816-11e4-ab90-0e4fddd5de28/viz.json",r="#all_map_pluto_rent_stabl_reg_2014v1 {polygon-fill: #FF6600;polygon-opacity: 0.6;line-color: #000;line-width: 0.7;line-opacity: 0.3;}";c.map.addLayer(t),cartodb.createLayer(c.map,n,{cartodb_logo:!1,legends:!1,https:!0,fullscreen:!0},function(n){e=n.getSubLayer(0),e.setCartoCSS(r),c.map.addLayer(n,!1),t.bringToBack()}).done(function(){})},b=function(){l&&c.map.removeLayer(l),c.map.setView([40.7127,-74.0059],12)};return{init:s,geoclient:h,resetMap:b}}(document,window,aja);var app=app||{};app.init=function(){function e(){{var e=app.el.el,t=app.f,n=app.a;app.s}app.events.publish("state-change",{currentSlide:e.slides[0]}),t.onResize(),t.goToSlide(e.currentSlide),n.createMailTo(),t.addToCalendar(),app.map.init()}return{init:e}}(window,document);