!function(){"use strict";var e=["html","json","jsonp","script"],t=["connect","delete","get","head","options","patch","post","put","trace"],n=function i(){var e={},t={},n={url:function(e){return s.call(this,"url",e,r.string)},sync:function(e){return s.call(this,"sync",e,r.bool)},cache:function(e){return s.call(this,"cache",e,r.bool)},type:function(e){return s.call(this,"type",e,r.type)},header:function(t,n){return e.headers=e.headers||{},r.string(t),"undefined"!=typeof n?(r.string(n),e.headers[t]=n,this):e.headers[t]},auth:function(t,n){return r.string(t),r.string(n),e.auth={user:t,passwd:n},this},method:function(e){return s.call(this,"method",e,r.method)},queryString:function(e){return s.call(this,"queryString",e,r.queryString)},data:function(e){return s.call(this,"data",e,r.plainObject)},body:function(e){return s.call(this,"body",e,null,function(e){if("object"==typeof e){if(!(e instanceof FormData)){try{e=JSON.stringify(e)}catch(t){throw new TypeError("Unable to stringify body's content : "+t.name)}this.header("Content-Type","application/json")}}else e+="";return e})},into:function(e){return s.call(this,"into",e,r.selector,function(e){return"string"==typeof e?document.querySelectorAll(e):e instanceof HTMLElement?[e]:void 0})},jsonPaddingName:function(e){return s.call(this,"jsonPaddingName",e,r.string)},jsonPadding:function(e){return s.call(this,"jsonPadding",e,r.func)},on:function(e,n){return"function"==typeof n&&(t[e]=t[e]||[],t[e].push(n)),this},off:function(e){return t[e]=[],this},trigger:function(e,n){var r=this,o=function(e,n){t[e]instanceof Array&&t[e].forEach(function(e){e.call(r,n)})};if("undefined"!=typeof e){e+="";var i=/^([0-9])([0-9x])([0-9x])$/i,a=e.match(i);a&&a.length>3?Object.keys(t).forEach(function(e){var t=e.match(i);!(t&&t.length>3&&a[1]===t[1])||"x"!==t[2]&&a[2]!==t[2]||"x"!==t[3]&&a[3]!==t[3]||o(e,n)}):t[e]&&o(e,n)}return this},go:function(){var t=e.type||(e.into?"html":"json"),n=c();return"function"==typeof a[t]?a[t].call(this,n):void 0}},a={json:function(e){var t=this;a._xhr.call(this,e,function(e){if(e)try{e=JSON.parse(e)}catch(n){return t.trigger("error",n),null}return e})},html:function(t){a._xhr.call(this,t,function(t){return e.into&&e.into.length&&[].forEach.call(e.into,function(e){e.innerHTML=t}),t})},_xhr:function(t,n){var r,o,i,a,s=this,c=e.method||"get",u=e.sync!==!0,d=new XMLHttpRequest,p=e.data,f=e.body,h=(e.headers||{},this.header("Content-Type"));if(!h&&p&&l()&&(this.header("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h=this.header("Content-Type")),p&&l())if("string"!=typeof f&&(f=""),h.indexOf("json")>-1)try{f=JSON.stringify(p)}catch(g){throw new TypeError("Unable to stringify body's content : "+g.name)}else{i=h&&h.indexOf("x-www-form-urlencoded")>1;for(r in p)f+=i?encodeURIComponent(r)+"="+encodeURIComponent(p[r])+"&":r+"="+p[r]+"\n\r"}a=[c,t,u],e.auth&&(a.push(e.auth.user),a.push(e.auth.passwd)),d.open.apply(d,a);for(o in e.headers)d.setRequestHeader(o,e.headers[o]);d.onprogress=function(e){e.lengthComputable&&s.trigger("progress",e.loaded/e.total)},d.onload=function(){var e=d.responseText;this.status>=200&&this.status<300&&("function"==typeof n&&(e=n(e)),s.trigger("success",e)),s.trigger(this.status,e),s.trigger("end",e)},d.onerror=function(e){s.trigger("error",e,arguments)},d.send(f)},jsonp:function(t){var n,r=this,a=document.querySelector("head"),s=e.sync!==!0,l=e.jsonPaddingName||"callback",c=e.jsonPadding||"_padd"+(new Date).getTime()+Math.floor(1e4*Math.random()),u={};if(i[c])throw new Error("Padding "+c+"  already exists. It must be unique.");/^ajajsonp_/.test(c)||(c="ajajsonp_"+c),window[c]=function(e){r.trigger("success",e),a.removeChild(n),window[c]=void 0},u[l]=c,t=o(t,u),n=document.createElement("script"),n.async=s,n.src=t,n.onerror=function(){r.trigger("error",arguments),a.removeChild(n),window[c]=void 0},a.appendChild(n)},script:function(t){var n,r=this,o=document.querySelector("head")||document.querySelector("body"),i=e.sync!==!0;if(!o)throw new Error("Ok, wait a second, you want to load a script, but you don't have at least a head or body tag...");n=document.createElement("script"),n.async=i,n.src=t,n.onerror=function(){r.trigger("error",arguments),o.removeChild(n)},n.onload=function(){r.trigger("success",arguments)},o.appendChild(n)}},s=function(t,n,o,i){if("undefined"!=typeof n){if("function"==typeof o)try{n=o.call(r,n)}catch(a){throw new TypeError("Failed to set "+t+" : "+a.message)}return e[t]="function"==typeof i?i.call(this,n):n,this}return"undefined"===e[t]?null:e[t]},l=function(){return["delete","patch","post","put"].indexOf(e.method)>-1},c=function(){var t=e.url,n="undefined"!=typeof e.cache?!!e.cache:!0,r=e.queryString||"",i=e.data;return n===!1&&(r+="&ajabuster="+(new Date).getTime()),t=o(t,r),i&&!l()&&(t=o(t,i)),t};return n},r={bool:function(e){return!!e},string:function(e){if("string"!=typeof e)throw new TypeError("a string is expected, but "+e+" ["+typeof e+"] given");return e},plainObject:function(e){if("object"!=typeof e||e.constructor!==Object)throw new TypeError("an object is expected, but "+e+"  ["+typeof e+"] given");return e},type:function(t){if(t=this.string(t),e.indexOf(t.toLowerCase())<0)throw new TypeError("a type in ["+e.join(", ")+"] is expected, but "+t+" given");return t.toLowerCase()},method:function(e){if(e=this.string(e),t.indexOf(e.toLowerCase())<0)throw new TypeError("a method in ["+t.join(", ")+"] is expected, but "+e+" given");return e.toLowerCase()},queryString:function(e){var t={};return"string"==typeof e?e.replace("?","").split("&").forEach(function(e){var n=e.split("=");2===n.length&&(t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]))}):t=e,this.plainObject(t)},selector:function(e){if("string"!=typeof e&&!(e instanceof HTMLElement))throw new TypeError("a selector or an HTMLElement is expected, "+e+" ["+typeof e+"] given");return e},func:function(e){if(e=this.string(e),!/^([a-zA-Z_])([a-zA-Z0-9_\-])+$/.test(e))throw new TypeError("a valid function name is expected, "+e+" ["+typeof e+"] given");return e}},o=function(e,t){var n;if(e=e||"",t)if(-1===e.indexOf("?")&&(e+="?"),"string"==typeof t)e+=t;else if("object"==typeof t)for(n in t)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof exports?module.exports=n:window.aja=window.aja||n}(),window.Modernizr=function(e,t,n){function r(e){v.cssText=e}function o(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var r in e){var o=e[r];if(!i(o,"-")&&v[o]!==n)return"pfx"==t?o:!0}return!1}function s(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function l(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+w.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?a(i,t):(i=(e+" "+E.join(r+" ")+r).split(" "),s(i,t,n))}var c,u,d,p="2.8.3",f={},h=t.documentElement,g="modernizr",m=t.createElement(g),v=m.style,y=":)",b=({}.toString,"Webkit Moz O ms"),w=b.split(" "),E=b.toLowerCase().split(" "),S={},x=[],C=x.slice,N=function(e,n,r,o){var i,a,s,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=o?o[r]:g+(r+1),c.appendChild(s);return i=["&#173;",'<style id="s',g,'">',e,"</style>"].join(""),c.id=g,(u?c:d).innerHTML+=i,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=h.style.overflow,h.style.overflow="hidden",h.appendChild(d)),a=n(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),h.style.overflow=l),!!a},j=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var r;return N("@media "+t+" { #"+g+" { position: absolute; } }",function(t){r="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),r},L={}.hasOwnProperty;d=o(L,"undefined")||o(L.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return L.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=C.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(C.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(C.call(arguments)))};return r}),S.borderradius=function(){return l("borderRadius")},S.csstransitions=function(){return l("transition")},S.generatedcontent=function(){var e;return N(["#",g,"{font:0/0 a}#",g,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e};for(var T in S)d(S,T)&&(u=T.toLowerCase(),f[u]=S[T](),x.push((f[u]?"":"no-")+u));return f.addTest=function(e,t){if("object"==typeof e)for(var r in e)d(e,r)&&f.addTest(r,e[r]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(h.className+=" "+(t?"":"no-")+e),f[e]=t}return f},r(""),m=c=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=v[e[g]];return t||(t={},m++,e[g]=m,v[m]=t),t}function i(e,n,r){if(n||(n=t),u)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||f.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function a(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function l(e){e||(e=t);var r=o(e);return y.shivCSS&&!c&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||s(e,r),e}var c,u,d="3.7.0",p=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){c=!0,u=!0}}();var y={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:p.shivCSS!==!1,supportsUnknownElements:u,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:i,createDocumentFragment:a};e.html5=y,l(t)}(this,t),f._version=p,f._domPrefixes=E,f._cssomPrefixes=w,f.mq=j,f.testProp=function(e){return a([e])},f.testAllProps=l,f.testStyles=N,f}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==m.call(e)}function o(e){return"string"==typeof e}function i(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();y=1,e?e.t?h(function(){("c"==e.t?p.injectCss:p.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):y=0}function l(e,n,r,o,i,l,c){function u(t){if(!f&&a(d.readyState)&&(b.r=f=1,!y&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&h(function(){E.removeChild(d)},50);for(var r in j[n])j[n].hasOwnProperty(r)&&j[n][r].onload()}}var c=c||p.errorTimeout,d=t.createElement(e),f=0,m=0,b={t:r,s:n,e:i,a:l,x:c};1===j[n]&&(m=1,j[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,m)},v.splice(o,0,b),"img"!=e&&(m||2===j[n]?(E.insertBefore(d,w?null:g),h(u,c)):j[n].push(d))}function c(e,t,n,r,i){return y=0,t=t||"j",o(e)?l("c"==t?x:S,e,t,this.i++,n,r,i):(v.splice(this.i++,0,e),1==v.length&&s()),this}function u(){var e=p;return e.loader={load:c,i:0},e}var d,p,f=t.documentElement,h=e.setTimeout,g=t.getElementsByTagName("script")[0],m={}.toString,v=[],y=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,E=w?f:g.parentNode,f=e.opera&&"[object Opera]"==m.call(e.opera),f=!!t.attachEvent&&!f,S=b?"object":f?"script":"img",x=f?"script":S,C=Array.isArray||function(e){return"[object Array]"==m.call(e)},N=[],j={},L={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};p=function(e){function t(e){var t,n,r,e=e.split("!"),o=N.length,i=e.pop(),a=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;a>n;n++)r=e[n].split("="),(t=L[r.shift()])&&(i=t(i,r));for(n=0;o>n;n++)i=N[n](i);return i}function a(e,o,i,a,s){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=r(o)?o:o[e]||o[a]||o[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,o,i,a,s):(j[l.url]?l.noexec=!0:j[l.url]=1,i.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(o)||r(c))&&i.load(function(){u(),o&&o(l.origUrl,s,a),c&&c(l.origUrl,s,a),j[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(o(e))n||(d=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}),a(e,d,t,0,c);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(r(d)?d=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(p[l])),a(e[l],d,t,l,c))}else!n&&f()}var s,l,c=!!e.test,u=e.load||e.both,d=e.callback||i,p=d,f=e.complete||i;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(o(e))a(e,0,d,0);else if(C(e))for(l=0;l<e.length;l++)c=e[l],o(c)?a(c,0,d,0):C(c)?p(c):Object(c)===c&&s(c,d);else Object(e)===e&&s(e,d)},p.addPrefix=function(e,t){L[e]=t},p.addFilter=function(e){N.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,o,l,c){var u,d,f=t.createElement("script"),o=o||p.errorTimeout;f.src=e;for(d in r)f.setAttribute(d,r[d]);n=c?s:n||i,f.onreadystatechange=f.onload=function(){!u&&a(f.readyState)&&(u=1,n(),f.onload=f.onreadystatechange=null)},h(function(){u||(u=1,n(1))},o),l?f.onload():g.parentNode.insertBefore(f,g)},e.yepnope.injectCss=function(e,n,r,o,a,l){var c,o=t.createElement("link"),n=l?s:n||i;o.href=e,o.rel="stylesheet",o.type="text/css";for(c in r)o.setAttribute(c,r[c]);a||(g.parentNode.insertBefore(o,g),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e,t){function n(t,n,a,s){t[r](i+n,"wheel"==o?a:function(t){!t&&(t=e.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==o?(n.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-1/40*t.wheelDeltaX)):n.deltaY=t.detail,a(n)},s||!1)}var r,o,i="";e.addEventListener?r="addEventListener":(r="attachEvent",i="on"),o="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,r){n(e,o,t,r),"DOMMouseScroll"==o&&n(e,"MozMousePixelScroll",t,r)}}(window,document),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var o=["opacity",t,~~(100*e),n,r].join("-"),i=.01+n/r*100,a=Math.max(1-(1-e)/t*(100-i),e),s=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return d[o]||(p.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+a+"}"+i+"%{opacity:"+e+"}"+(i+.01)+"%{opacity:1}"+(i+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",p.cssRules.length),d[o]=1),o}function r(e,t){var n,r,o=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<u.length;r++)if(n=u[r]+t,void 0!==o[n])return n;return void 0!==o[t]?t:void 0}function o(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function a(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=i(e||{},s.defaults,f)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,r){function i(){return o(n("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function s(e,s,l){t(p,t(o(i(),{rotation:360/r.lines*e+"deg",left:~~s}),t(o(n("roundrect",{arcsize:r.corners}),{width:c,height:r.width,left:r.radius,top:-r.width>>1,filter:l}),n("fill",{color:a(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var l,c=r.length+r.width,u=2*c,d=2*-(r.width+r.length)+"px",p=o(i(),{position:"absolute",top:d,left:d});if(r.shadow)for(l=1;l<=r.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=r.lines;l++)s(l);return t(e,p)},s.prototype.opacity=function(e,t,n,r){var o=e.firstChild;r=r.shadow&&r.lines||0,o&&t+r<o.childNodes.length&&(o=o.childNodes[t+r],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var c,u=["webkit","Moz","ms","O"],d={},p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},i(s.prototype,{spin:function(t){this.stop();{var n=this,r=n.opts,i=n.el=o(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});r.radius+r.length+r.width}if(o(i,{left:r.left,top:r.top}),t&&t.insertBefore(i,t.firstChild||null),i.setAttribute("role","progressbar"),n.lines(i,n.opts),!c){var a,s=0,l=(r.lines-1)*(1-r.direction)/2,u=r.fps,d=u/r.speed,p=(1-r.opacity)/(d*r.trail/100),f=d/r.lines;!function h(){s++;for(var e=0;e<r.lines;e++)a=Math.max(1-(s+(r.lines-e)*f)%d*p,r.opacity),n.opacity(i,e*r.direction+l,a,r);n.timeout=n.el&&setTimeout(h,~~(1e3/u))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,i){function s(t,n){return o(e(),{position:"absolute",width:i.length+i.width+"px",height:i.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*u+i.rotate)+"deg) translate("+i.radius+"px,0)",borderRadius:(i.corners*i.width>>1)+"px"})}for(var l,u=0,d=(i.lines-1)*(1-i.direction)/2;u<i.lines;u++)l=o(e(),{position:"absolute",top:1+~(i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:c&&n(i.opacity,i.trail,d+u*i.direction,i.lines)+" "+1/i.speed+"s linear infinite"}),i.shadow&&t(l,o(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(l,s(a(i.color,u),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var h=o(e("group"),{behavior:"url(#default#VML)"});return!r(h,"transform")&&h.adj?l():c=r(h,"animation"),s});var app=app||{};app.map=function(e,t,n){function r(e,t,r){n().url(e).type(t).on("success",function(e){r(e)}).on("error",function(){r("error")}).go()}function o(){a=app.ui.el,s=app.ui.f,g()}var i,a={},s={},l="https://chenrick.cartodb.com/api/v2/sql?q=",c={},u=function(e,t,n){var o="9cd0a15f",i="app_id="+o+"&",a="54dc84bcaca9ff4877da771750033275",s="app_key="+a,l="houseNumber="+e+"&",c=t.replace(" ","+"),u="street="+c+"&",p="borough="+n+"&",f="https://api.cityofnewyork.us/geoclient/v1/address.json?",h=f+l+u+p+i+s;r(h,"jsonp",d)},d=function(e){if("object"==typeof e&&void 0!==e.address.bbl){var t=e.address;c={bbl:t.bbl,lon:t.longitudeInternalLabel,lat:t.latitudeInternalLabel,hNo:t.houseNumber,sName:t.streetName1In,bCode:t.boroughCode1In,bUSPS:t.uspsPreferredCityName,zip:t.zipCode,cd:t.communityDistrict,bin:t.giBuildingIdentificationNumber1};var n=t.bbl,r=JSON.stringify(c);_gaq.push(["_trackEvent","Geoclient Success","Result",r]),p(n),h(e)}else app.ui.el.addressInput.value="",app.ui.f.resetBoroValue(),app.ui.f.hasClass(app.ui.el.valErrorNF,"vis-hidden")===!0&&app.ui.f.toggleClass(app.ui.el.valErrorNF,"vis-hidden"),app.ui.f.hasClass(app.ui.el.valErrorBoro,"vis-hidden")===!1&&app.ui.f.addClass(app.ui.el.valErrorBoro,"vis-hidden"),app.ui.f.hasClass(app.ui.el.valErrorAddress,"vis-hidden")===!1&&app.ui.f.addClass(app.ui.el.valErrorAddress,"vis-hidden"),app.ui.f.goToPrevSlide()},p=function(e){var t="SELECT bbl FROM all_nyc_likely_rent_stabl_merged WHERE bbl = "+e;r(l+t,"json",f)},f=function(e){if(e.rows.length>0&&a.yesNoState===!1){var t=JSON.stringify(e.rows[0].bbl);_gaq.push(["_trackEvent","CDB","Match",t]),s.toggleClass(a.yes,"hidden"),s.toggleClass(a.no,"hidden"),a.yesNoState=!0}s.goToNextSlide()},h=function(e){var t=e.address.longitudeInternalLabel,n=e.address.latitudeInternalLabel,r=[n,t],o=e.address.houseNumber+" "+e.address.firstStreetNameNormalized+"<br>"+e.address.uspsPreferredCityName+", NY "+e.address.zipCode;console.log("x: ",t," y: ",n," latlng: ",r),i&&a.map.removeLayer(i),i=new L.marker(r).addTo(a.map),i.on("popupopen",function(){a.map.setView(r,17)}),i.bindPopup("<b>"+o+"</b>").openPopup()},g=function(){a.map=new L.Map("map",{center:[40.7127,-74.0059],zoom:12,dragging:!1,touchZoom:!1,doubleClickZoom:!1,scrollWheelZoom:!1,zoomControl:!1});var e=L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'});a.map.addLayer(e),cartodb.createLayer(a.map,{user_name:"chenrick",legends:!1,cartodb_logo:!1,type:"cartodb",sublayers:[{sql:"SELECT the_geom, the_geom_webmercator, cartodb_id FROM all_nyc_likely_rent_stabl_merged",cartocss:"#all_map_pluto_rent_stabl_reg_2014v1 {polygon-fill: #FF6600;polygon-opacity: 0.6;line-color: #000;line-width: 0.7;line-opacity: 0.5;}"}]}).addTo(a.map).done(function(){e.bringToBack()})},m=function(){i&&a.map.removeLayer(i),a.map.setView([40.7127,-74.0059],12)};return{init:o,geoclient:u,resetMap:m}}(document,window,aja);var app=app||{};app.ui=function(e,t){function n(e){this.dd=e,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.drop-down > li"),this.val=void 0,this.index=-1,this.initEvents()}function r(e,t,n){var r=0,o=e.length;for(r;o>r;r++)e[r].addEventListener(t,n,!1)}function o(e){var t=e.keyCode;t===T.UP?(l(),e.preventDefault()):t===T.DOWN&&(c(),e.preventDefault())}function i(e){var t=e/30||-e;-1>t?c():t>1&&l()}function a(e){for(var t,n=0;n<N.slides.length;n++)N.slides[n]===e&&(t=n);return t}function s(e){if(!j&&e){j=!0,N.currentSlide=e,console.log("current slide: ",N.currentSlide);var t=a(e);TweenLite.to(N.slidesContainer,1,{scrollTo:{y:L*t},onComplete:d})}}function l(e){var t=N.currentSlide.previousElementSibling;t&&(s(t),e&&"function"==typeof e&&(e(),console.log("goToPrevSlide callback called.")))}function c(e){var t=N.currentSlide.nextElementSibling;t&&(s(t),e&&"function"==typeof e&&(e(),console.log("goToNextSlide callback called.")))}function u(){N.currentSlide&&(N.addressInput.value="",E(),S(),x(),app.map.resetMap(),m(N.yes,"hidden"),y(N.no,"hidden"),s(N.slides[0]))}function d(){j=!1,p(N.currentSlide)}function p(e){var t=a(e),n=0,r=app.ui.el.progressCircles.length;for(n;r>n;n++){var o=N.progressCircles[n];t===n?(o.style.backgroundImage="url(assets/png/oval_25_filled.png)",o.style.backgroundSize="25px",o.style.backgroundRepeat="no-repeat"):(o.style.background="url(assets/png/oval_25_blank.png)",o.style.backgroundSize="25px",o.style.backgroundRepeat="no-repeat")}}function f(){var t=e.innerHeight,n=N.currentSlide,r=a(n);L!==t&&(L=t,TweenLite.set([N.slidesContainer,N.slides],{height:L+"px"}),TweenLite.set(N.slidesContainer,{scrollTo:{y:L*r}}))}function h(e,t){if(e&&e.length){var n=0,r=e.length;for(n;r>n;n++)return t(e[n],n)}return e&&!e.length?t(e):void 0}function g(e,t){return h(e,function(e){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)})}function m(e,t){h(e,function(e){e.classList?e.classList.add(t):e.className+=" "+t})}function v(e,t){h(e,function(e){if(e.classList)e.classList.toggle(t);else{var n=e.className.split(" "),r=n.indexOf(t);r>=0?n.splice(r,1):(n.push(t),e.className=n.join(" "))}})}function y(e,t){h(e,function(e){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")})}function b(e,t){if(console.log("checkAddress: ",e,"---",t),""!==e&&void 0!==t){c();var n=w(e);setTimeout(function(){app.map.geoclient(n[0],n[1],t)},1e3)}else""===e&&void 0===t?g(N.valErrorAddress,"vis-hidden")===!0&&g(N.valErrorBoro,"vis-hidden")===!0&&(v(N.valErrorAddress,"vis-hidden"),v(N.valErrorBoro,"vis-hidden")):void 0===t?g(N.valErrorBoro,"vis-hidden")===!0&&v(N.valErrorBoro,"vis-hidden"):""===e?g(N.valErrorAddress,"vis-hidden")===!0&&v(N.valErrorAddress,"vis-hidden"):l()}function w(e){var t=e.split(" "),n=t.length,r=t[0],o=t.splice(1,n),i=o.join(" ");return[r,i]}function E(){N.yesNoState===!0&&(v(N.yes,"hidden"),v(N.no,"hidden"),N.yesNoState=!1)}function S(){var e=0,t=N.valErrors.length;for(e;t>e;e++)g(N.valErrors[e],"vis-hidden")===!1&&m(N.valErrors[e],"vis-hidden")}function x(){k.val=void 0,k.placeholder.text("Select a Borough")}function C(){N.currentSlide=N.slides[0],s(N.currentSlide),m(N.yes,"hidden"),app.map.init()}var N={navGoNext:t.querySelectorAll(".go-next"),navGoFirst:t.querySelectorAll(".go-first"),navGoFour:t.querySelectorAll(".go-step4"),progressCircles:t.querySelectorAll(".margin-circles li"),slidesContainer:t.querySelector(".slides-container"),slides:t.querySelectorAll(".slide"),slide4:t.querySelector("#slide-8"),currentSlide:null,addressInput:t.querySelector(".address-input"),boroSelect:t.querySelector(".user-data.borough-select"),boroDropDown:t.getElementById("boroughs"),boroDropDownItems:t.querySelectorAll("#boroughs li a"),selectBoro:t.getElementsByName("borough"),search:t.querySelector(".search"),valErrors:t.querySelectorAll(".validation-error"),valErrorAddress:t.getElementById("error-address"),valErrorBoro:t.getElementById("error-boro"),valErrorNF:t.getElementById("error-not-found"),yes:t.querySelectorAll(".yes"),no:t.querySelectorAll(".no"),yesNoState:!1,map:t.getElementById("map"),mapMessage:t.querySelector(".map-message"),mailTo:t.getElementById("mail-to"),lightBox:t.getElementById("rent-history"),fbShare:t.querySelector(".fb-share-button"),learnMore:t.querySelector(".button.learn-more")},j=!1,L=e.innerHeight,T={UP:38,DOWN:40};e.onresize=f,addWheelListener(e,function(e){i(e.deltaY),e.preventDefault()}),e.onkeydown=o,r(N.navGoNext,"click",c),r(N.navGoFour,"click",function(e){e.preventDefault(),s(N.slides[6])}),n.prototype={initEvents:function(){var e=this;console.log("initEvents this: ",this),e.dd.on("click",function(e){return e.preventDefault(),v(this,"active"),!1}),e.opts.on("click",function(t){t.preventDefault();var n=$(this);e.val=n.text(),e.index=n.index(),e.placeholder.text("Borough: "+e.val),console.log("obj: ",e)})},getValue:function(){return this.val},getIndex:function(){return this.index}};var k=new n($(".user-data.borough-select"));return N.slidesContainer.addEventListener("click",function(){g(N.boroSelect,"active")&&y(N.boroSelect,"active")}),N.search.addEventListener("click",function(e){e.preventDefault();var t=N.addressInput.value,n=k.val;console.log("streetAddress: ",t," boro: ",n),b(t,n)}),r(N.navGoFirst,"click",u),N.addressInput.addEventListener("blur",function(){""!==N.addressInput.value&&g(N.valErrorAddress,"vis-hidden")!==!0&&m(N.valErrorAddress,"vis-hidden")}),r(N.boroDropDownItems,"click",function(){g(N.valErrorBoro,"vis-hidden")!==!0&&void 0!==k.getValue&&m(N.valErrorBoro,"vis-hidden")}),N.lightBox.addEventListener("click",function(t){t.preventDefault(),s(N.slides[6]),e.location.hash=""}),{init:C,el:N,f:{goToSlide:s,goToPrevSlide:l,goToNextSlide:c,toggleClass:v,hasClass:g,addClass:m,resetBoroValue:x}}}(window,document),window.addEventListener("DOMContentLoaded",function(){app.ui.init()});