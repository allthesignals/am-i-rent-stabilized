<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-mobile-web-app-status-bar-style" content="black">      
      <title>Am I Rent Stabilized?</title>
      <meta name="description" content="Find out if your NYC apartment is rent-stabilized!">      
      <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">    
      <link rel="stylesheet" type="text/css" href="../bower_components/normalize.css/normalize.css">
      <link href='http://fonts.googleapis.com/css?family=Oxygen:400,700,300' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" type="text/css" href="../css/main.css">
      <script src="http://use.typekit.net/emf7xrp.js"></script>
      <script>try{Typekit.load();}catch(e){}</script>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-57236362-1']);
        _gaq.push(['_trackPageview']);
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>        
  </head>
  <body>
    <div id="wrapper"></div>   
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="../js/vendor/handlebars.min.js"></script>
    <script type="text/javascript" src="../js/dist/templates.js"></script>            
    <script type="text/javascript">
      function init(){
        
        var template = app.templates.why,
            html;

        console.log('template: ', template);

        $.getJSON('../data/why-content.json', function(data){
          // console.log('data: ', data);
          html = template(data.languages.en);
          // console.log('html: ', html);
          document.querySelector('#wrapper').innerHTML = html;
        }).done(function(){
          // hamburger icon
          var burgerIcon = document.querySelector('.burger'),
              mainNavList = document.querySelector('.main-nav ul');          
          burgerIcon.addEventListener('click', function(e) {
            e.preventDefault();            
            toggleClass(burgerIcon, 'open');
            toggleClass(mainNavList, 'responsive');
          });          
        });            

        function iterateNodeList(list, fn) {
          if (list && list.length) {
            var i=0, len=list.length;
            for (i; i<len; i++) {
              return fn(list[i], i);
            }
          }
          if (list && !list.length) {
            return fn(list);
          }   
        } 
        
        function toggleClass(el, className) {
          iterateNodeList(el, function(el){
            if (el.classList) {
              el.classList.toggle(className);
            } else {
              var classes = el.className.split(' ');
              var existingIndex = classes.indexOf(className);
              if (existingIndex >=0) {
                classes.splice(existingIndex, 1);
              } else {
                classes.push(className);
                el.className = classes.join(' ');
              }
            }
          });   
        }
      };
      
      function ready(fn) {
        if (document.readyState != 'loading'){
          fn();
        } else if (document.addEventListener) {
          document.addEventListener('DOMContentLoaded', fn);
        } else {
          document.attachEvent('onreadystatechange', function() {
            if (document.readyState != 'loading')
              fn();
          });
        }
      }

      ready(init);      
  </script>
  </body>
</html>